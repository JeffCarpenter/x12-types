use super::*;

#[test]
fn parse_837() {
    //source: https://www.texaschildrenshealthplan.org/sites/default/files/pdf/5010_X12_837P_Professional_CompGuide_V1.1.pdf
    let str = r#"ISA*00* *00* *ZZ*133052274 *ZZ*TXCSM0001 *160308*2119*^*00501*000005555*0*P*:
GS*HC*133052274*TXCSM0001*20160308*211916*5555*005010X222A1
ST*837*000000055*005010X222A1
BHT*0001*00*00011111*20160308*211916*CH
NM1*41*2*SUBMITTER ABC*****46*111111111
PER*IC*EMDEON CUSTOMER SOLUTIONS*TE*8008456592
NM1*40*2*RECEIVER ABC*****46*TXCSM0001
HL*1**20*1
PRV*BI*PXC*208000000X
NM1*85*2*BILLING NAME ABC*****XX*1111111111
N3*11111 NO NAME ROAD
N4*HOUSTON*TX*770744336
REF*EI*111111111
HL*2*1*22*0
SBR*P*18*******MC
NM1*IL*1*LASTNAME*FIRST****MI*111111111
N3*ADDRESSLINE ONE
N4*HOUSTON*TX*770744336
DMG*D8*11111111*M
NM1*PR*2*TEXAS CHILDRENS WELL*****PI*TXCSM
CLM*1111111111*210.01***11:B:1*Y*A*Y*Y
REF*D9*11111111111111~
HI*ABK:Z00129~
NM1*77*2*FACILITY ABC*****XX*1111111111
N3*11111 NO NAME ROAD
N4*HOUSTON*TX*770744336
LX*1
SV1*HC:99392:AM:25*150*UN*1***1
DTP*472*D8*20160307
REF*6R*1
LX*2
SV1*HC:96110:U6*20*UN*1***1
DTP*472*D8*20160307
REF*6R*2
LX*3
SV1*HC:90633*.01*UN*1***1
DTP*472*D8*20160307
REF*6R*3
LX*4
SV1*HC:90460*40*UN*1***1
DTP*472*D8*20160307
REF*6R*4
SE*41*000000055
GE*1*5555
IEA*1*000005555"#;
    let (rest, obj) = Transmission::<_837>::parse(&str).unwrap();
    println!("{rest}");
    println!("{obj:?}");
}

#[test]
fn parse_837_2() {
    //source: https://www.texaschildrenshealthplan.org/sites/default/files/pdf/5010_X12_837P_Professional_CompGuide_V1.1.pdf
    let str = r#"ISA*00* *00* *ZZ*133052274 *ZZ*752280001 *160527*2139*^*00501*000004444*0*P*:
GS*HC*133052274*752280001*20160527*213905*4444*X*005010X222A1
ST*837*000000044*005010X222A1
BHT*0001*00*00018091A*20160527*213905*CH
NM1*41*2*SUBMITTER ABC*****46*111111111
PER*IC*EMDEON CUSTOMER SOLUTIONS*TE*8008456592
NM1*40*2*RECEIVER ABC*****46*TXCSM0001
HL*1**20*1
PRV*BI*PXC*208D00000X
NM1*85*BILLINGNAME*FIRST*M***XX*1111111111
N3*11111 NO NAME ROAD
N4*HOUSTON*TX*770744336
REF*EI*111111111
PER*IC*BILLINGCONTACT*TE*8321111111
HL*2*1*22*0
SBR*P*18**MEDICAID OF TX*****CI
NM1*IL*1*LASTNAME*FIRST*M***M111111111
N3*11111 NO NAME ROAD
N4*HOUSTON*TX*770744336
DMG*D8*11111111*M
NM1*PR*2*TCHPCHIP 76048*****PI*75228
CLM*1111111111*292***11:B:1*Y*A*Y*Y
REF*D9*111111111111111
HI*ABK:Z00129*ABF:J309*ABF:J029
LX*1
SV1*HC:87880:QW*22*UN*1***1:2:3
DTP*472*D8*20160525
REF*6R*1
NTE*ADD*207R00000X
LX*2
SV1*HC:99392:AM*100*UN*1***1:2:3
DTP*472*D8*20160525
REF*6R*2
NTE*ADD*207R00000X
LX*3
SV1*HC:99213:25*150*UN*1***1:2:3
DTP*472*D8*20160525
REF*6R*3
NTE*ADD*207R00000X
LX*4
SV1*HC:96110:U6*20*UN*1***1:2:3
DTP*472*D8*20160525
REF*6R*4
NTE*ADD*207R00000X
SE*43*0000000044
GE*1*4444
IEA*1*000004444"#;
    let (rest, obj) = Transmission::<_837>::parse(&str).unwrap();
    println!("{rest}");
    println!("{obj:?}");
}
